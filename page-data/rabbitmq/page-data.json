{"componentChunkName":"component---src-components-blog-tsx","path":"/rabbitmq/","result":{"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Rabbitmq is the key to event driven distributed system, especially for communications between micro-services."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"However, while developing, it is always the case that we don't see any message coming, and worker is not handling anything. Since sending the message, dispatching the message and consuming the message are totally behind the scene, debugging rabbitmq message is not an easy task. In this article, I am going to explain a concrete way to solve this problem."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Basic introduction: Exchange and Queue"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Exchange is like a specific channel to receive messages. One exchange can be used to listen to different messages through binding, and each "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"binding"}]},{"type":"text","value":" between a message (or "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"routing key"}]},{"type":"text","value":") will create a specific "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"queue"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In short, one exchange can be involved with multiple queues, each queue stands for a binding between an exchange and a routing key, and Rabbitmq is the broker to dispatch messages to specific queues."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"How to debug"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"What happens when a message is not received by a worker ? Don't worry, let's break the whole flow into different steps."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Step 1: Launch rabbitmq locally and send the message"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's imagine that we have a service, and a worker. Service will dispatch an message, and worker will consumer that message."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First of all, let's launch the service via docker-compose locally, with docker-compose, it should launch the rabbitmq locally as well. Let's open the rabbitmq locally and login, the localhost port and credentials should be found from docker-compose file."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 672px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/site-v2.0/static/ee9d062fccb38e95a5f50a0ade33f774/5d1c9/1.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 66.07142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABzElEQVR42p1Sy47aQBD0/39HPiNRJDgQLoSVEFocSDD2GBuDX+PX2GNXumfXCHadS5BKJff0VFf1YMWyhGw7pFWDY5Tg1Q3wyw9hizf24gwiySFSCS8tILLizlOwhrqAfvmK4fLHQMoMquvwvz8LukPh/4bKYyiZ4Ha9oKkrFDJHTYzdd+DHF+g0gCxLdKoxZxj6SVh9P+ByCXEloSS+oipy6LZBU0mohgTdn8DrN/QyQllKaFWhLkmwb9/RPcEahgFRdIXjnHA8HtE0Cj3VRmiKYdD3n+LxXa4/wuKDOI6R5zlFrUmwgdYaHe2RobsWPX331MyDXU9A+Gd4QlCyyPQ+wjhkQSkl7aw24Msj+JyHcZ0HtG1roJgnHs84HC/W7w7HOKNLrpf0IIoeRCl1Zz7jvidBLhwOB+z3e4MwDI3boijg0E5Prov96W2/fD4yIwiCzw7Z3Xw+x2w2u0dP09TEPDkOxPkM2/fNNw8ZmfvY9aTgZrPBer02QlmWGWawQ4/EDiTKw5IkeWIWnRTcbrdYrVawbds0joJnEvNI7IWcpiTCteSB/ym4XC6xWCyw2+1wu91MrJyaffprCNrThvbIzrk+pmBw9I+CfwEX5+bYMfaxbgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"1","title":"","src":"/site-v2.0/static/ee9d062fccb38e95a5f50a0ade33f774/ff9d2/1.png","srcSet":["/site-v2.0/static/ee9d062fccb38e95a5f50a0ade33f774/0372f/1.png 168w","/site-v2.0/static/ee9d062fccb38e95a5f50a0ade33f774/2ec80/1.png 336w","/site-v2.0/static/ee9d062fccb38e95a5f50a0ade33f774/ff9d2/1.png 672w","/site-v2.0/static/ee9d062fccb38e95a5f50a0ade33f774/7b5cb/1.png 1008w","/site-v2.0/static/ee9d062fccb38e95a5f50a0ade33f774/275af/1.png 1344w","/site-v2.0/static/ee9d062fccb38e95a5f50a0ade33f774/5d1c9/1.png 1738w"],"sizes":"(max-width: 672px) 100vw, 672px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Before sending the message, let's remove any real consumer for this message, which means, do not start the worker yet to handle the message. This will make sure that the message will be not handled and stay as queued messages."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Step 2: Get the message and check the payload in Rabbitmq"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Once we launch the rabbitmq locally and send the message, we should be able to see the message inside queued message. In RabbitMQ, it's possible to get the message payload by clicking on "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Get Messages"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Once we get the message payload, it is possible to verify if the payload is correct. If the payload is correct, but the worker still cannot handle the message correctly, then the problem is on the consumer side."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 672px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/site-v2.0/static/6ff0d79d8c1a2d10a6968ffe316ad4fd/a4f2f/2.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 30.35714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjklEQVR42pWQywoDIQxF/f9fm9V8ha3jq2jFR2KqWQwDLXQMnCxCOORGACAZ40lKRTG+qbV2UmtlrrN/iNmstUNqKIRAKSUmxngyd3rvtxAAwDKlngNFWmsWTxEi8tJKiRlJygd57/lS5xzlnKmUsixjYQhA23bQvtshWhd8CRH7iPwaVx4cc9bdf/364QcaWtc9iN7z2gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2","title":"","src":"/site-v2.0/static/6ff0d79d8c1a2d10a6968ffe316ad4fd/ff9d2/2.png","srcSet":["/site-v2.0/static/6ff0d79d8c1a2d10a6968ffe316ad4fd/0372f/2.png 168w","/site-v2.0/static/6ff0d79d8c1a2d10a6968ffe316ad4fd/2ec80/2.png 336w","/site-v2.0/static/6ff0d79d8c1a2d10a6968ffe316ad4fd/ff9d2/2.png 672w","/site-v2.0/static/6ff0d79d8c1a2d10a6968ffe316ad4fd/7b5cb/2.png 1008w","/site-v2.0/static/6ff0d79d8c1a2d10a6968ffe316ad4fd/275af/2.png 1344w","/site-v2.0/static/6ff0d79d8c1a2d10a6968ffe316ad4fd/a4f2f/2.png 1874w"],"sizes":"(max-width: 672px) 100vw, 672px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Step 3: Publish the message manually and check the consumer"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First of all, let's save the payload from the last message somewhere, it will be used when we publish the message by hand to test the consumer."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now, let's stop the service locally, and launch the consumer (worker), the rabbitmq should be always running."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In the same queue, let's publish the message with the saved payload, and check the logs from the worker. And that's it !"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 672px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/site-v2.0/static/c3069b2919526318733a6101ae640ec2/be677/3.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 38.69047619047619%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAsklEQVR42r2RUQ7CIBBEuf/5egRNS7RKaQu7LDACMY0/Fr/c5GWADBPYVfM8wxgDEQEzg4gOrYQQDmKMXdQ4jtDThOvlghpurYVzDvu+Y9tW+LKuZ8wEICPnc5TWGhwEzlNTYmkqMTWIA8xiEaS8IGX0Stl1xcN6kGQ4Th/ENwkcMygkWB/Ry1TV4MulX6r6Us5/DnRO8NxK7yTBh+/ULy/F2w0cBoPbndumzKD16IzeUF5rDnaPD1bTxAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"3","title":"","src":"/site-v2.0/static/c3069b2919526318733a6101ae640ec2/ff9d2/3.png","srcSet":["/site-v2.0/static/c3069b2919526318733a6101ae640ec2/0372f/3.png 168w","/site-v2.0/static/c3069b2919526318733a6101ae640ec2/2ec80/3.png 336w","/site-v2.0/static/c3069b2919526318733a6101ae640ec2/ff9d2/3.png 672w","/site-v2.0/static/c3069b2919526318733a6101ae640ec2/7b5cb/3.png 1008w","/site-v2.0/static/c3069b2919526318733a6101ae640ec2/275af/3.png 1344w","/site-v2.0/static/c3069b2919526318733a6101ae640ec2/be677/3.png 2354w"],"sizes":"(max-width: 672px) 100vw, 672px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Thanks for reading !"}]}],"data":{"quirksMode":false}},"frontmatter":{"title":"How to debug rabbitmq message","date":"04 June, 2025"}}},"pageContext":{"slug":"/rabbitmq/"}},"staticQueryHashes":["2080627102","265798717"],"slicesMap":{}}