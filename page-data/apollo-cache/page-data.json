{"componentChunkName":"component---src-components-blog-tsx","path":"/apollo-cache/","result":{"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Recently we met a problem of a disappearing element on the web. Finally we found that it is because of a lack of data from graphql query."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Why it happens"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"However, the reason why the data is lacking is because the queried object doesn't have an id. We have queried the same object twice, and the second time the object contains less field, thus in ApolloCache the query with less field overwrites the one with more field, and data is missing."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"How did we find it"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"With the apollo chrome extension, we can debug apollo cache and check the list of cache IDs.\nIt's also possible to console.log the cache with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"apolloClient.cache"}]},{"type":"text","value":" on the server side (we have used nextjs)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"What would be the possible solutions"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Add id to the object, so Apollo could create the cache for this object properly to prevent from totally overwrittening the object."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In typepolicy, "},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/react/caching/cache-field-behavior/#merging-arrays"},"children":[{"type":"text","value":"merge"}]},{"type":"text","value":" the fields, so it will merge instead of overwriting."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Thanks for reading !"}]}],"data":{"quirksMode":false}},"frontmatter":{"title":"Debug apollo cache in the web","date":"22 September, 2022"}}},"pageContext":{"slug":"/apollo-cache/"}},"staticQueryHashes":["2080627102","265798717"],"slicesMap":{}}