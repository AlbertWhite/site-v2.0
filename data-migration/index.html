<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.82 'Merriweather',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Merriweather',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;color:hsla(0,0%,0%,0.9);font-family:'Merriweather Sans',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:2.25rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;color:hsla(0,0%,0%,0.9);font-family:'Merriweather Sans',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:1.62671rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;color:hsla(0,0%,0%,0.9);font-family:'Merriweather Sans',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:1.38316rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;color:hsla(0,0%,0%,0.9);font-family:'Merriweather Sans',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;color:hsla(0,0%,0%,0.9);font-family:'Merriweather Sans',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:0.85028rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;color:hsla(0,0%,0%,0.9);font-family:'Merriweather Sans',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:0.78405rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}ul{margin-left:1.82rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.82rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;font-size:0.85rem;line-height:1.82rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;font-size:1rem;line-height:1.82rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}blockquote{margin-left:0;margin-right:1.82rem;margin-top:0;padding-bottom:0;padding-left:2.0475rem;padding-right:0;padding-top:0;margin-bottom:1.82rem;font-size:1.17608rem;line-height:1.82rem;color:hsla(0,0%,0%,0.59);border-left:0.6825rem solid;border-color:hsla(0,0%,0%,0.1);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.82rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.82rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.82rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.82rem;margin-bottom:calc(1.82rem / 2);margin-top:calc(1.82rem / 2);}li > ul{margin-left:1.82rem;margin-bottom:calc(1.82rem / 2);margin-top:calc(1.82rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.82rem / 2);}code{font-size:0.85rem;line-height:1.82rem;}kbd{font-size:0.85rem;line-height:1.82rem;}samp{font-size:0.85rem;line-height:1.82rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.21333rem;padding-right:1.21333rem;padding-top:0.91rem;padding-bottom:calc(0.91rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#375c85;text-decoration:none;box-shadow:0 1px 0 0 currentColor;}a:hover,a:active{box-shadow:none;}h1,h2,h3,h4,h5,h6{margin-top:3.64rem;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.82rem;color:hsla(0,0%,0%,0.8);font-weight:400;}blockquote cite:before{content:"â€” ";}@media only screen and (max-width:480px){blockquote{margin-left:-1.365rem;margin-right:0;border-left:0.34125rem solid;border-color:hsla(0,0%,0%,0.1);padding-left:1.02375rem;}}@media only screen and (max-width:768px){html{font-size:93.75%;line-height:27.35px;}}</style><meta name="generator" content="Gatsby 5.13.0"/><style data-href="/site-v2.0/styles.8986dcf88797311951de.css" data-identity="gatsby-global-css">body,html{min-height:100vh}html{--app-main-color:#639;align-items:center;background-color:#fff;margin:0 auto;max-width:672px;@media (max-width:768px){max-width:80%}}body.dark{background:#282c35;color:#fff}body.dark h2,body.dark h3,body.dark h4,body.dark p{color:#fff!important}body.dark a,body.dark a h3{color:#e0c1ff}body.dark a div{color:#fff}body.dark .filterContainer{background-color:#282c35}a{color:var(--app-main-color,#639);color:#639}a:hover{box-shadow:0 1px 0 0 currentColor}pre[class*=language-]{font-size:.8em!important;white-space:pre-wrap!important}.react-toggle--focus .react-toggle-thumb{box-shadow:none!important}.customToggle.react-toggle--checked .react-toggle-track,.customToggle.react-toggle--checked:hover:not(.react-toggle--disabled) .react-toggle-track{background-color:#639;background-color:var(--app-main-color,#639)}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.8em}.gatsby-highlight{background-color:#fdf6e3;border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}.gatsby-highlight pre[class*=language-].line-numbers{overflow:initial;padding:0 0 0 2.8em}code[class*=language-],pre[class*=language-]{word-wrap:normal;color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#073642}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{background:#eee8d5;color:#657b83}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.react-toggle{-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;background-color:transparent;border:0;cursor:pointer;display:inline-block;padding:0;position:relative;touch-action:pan-x;-webkit-user-select:none;user-select:none}.react-toggle-screenreader-only{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle--disabled{cursor:not-allowed;opacity:.5;transition:opacity .25s}.react-toggle-track{background-color:#4d4d4d;border-radius:30px;height:24px;padding:0;transition:all .2s ease;width:50px}.react-toggle:hover:not(.react-toggle--disabled) .react-toggle-track{background-color:#000}.react-toggle--checked .react-toggle-track{background-color:#19ab27}.react-toggle--checked:hover:not(.react-toggle--disabled) .react-toggle-track{background-color:#128d15}.react-toggle-track-check{bottom:0;height:10px;left:8px;line-height:0;margin-bottom:auto;margin-top:auto;opacity:0;position:absolute;top:0;transition:opacity .25s ease;width:14px}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{bottom:0;height:10px;line-height:0;margin-bottom:auto;margin-top:auto;position:absolute;right:10px;top:0;width:10px}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{background-color:#fafafa;border:1px solid #4d4d4d;border-radius:50%;box-sizing:border-box;height:22px;left:1px;position:absolute;top:1px;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;transition:all .25s ease;width:22px}.react-toggle--checked .react-toggle-thumb{border-color:#19ab27;left:27px}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #0099e0}.react-toggle:active:not(.react-toggle--disabled) .react-toggle-thumb{box-shadow:0 0 5px 5px #0099e0}</style><link href="//fonts.googleapis.com/css?family=Merriweather+Sans:800|Merriweather:400,400i,700" rel="stylesheet" type="text/css"/><style data-styled="" data-styled-version="6.1.8">.iqYGQi{color:#663399;color:var(--app-main-color,#663399);}/*!sc*/
data-styled.g5[id="blog__StyledTitle-sc-1dnbuxy-0"]{content:"iqYGQi,"}/*!sc*/
.jHXVia{font-size:0.8rem;color:inherit;margin-bottom:2rem;}/*!sc*/
data-styled.g6[id="blog__StyledDate-sc-1dnbuxy-1"]{content:"jHXVia,"}/*!sc*/
.kwpZJy{margin:0 1rem;}/*!sc*/
data-styled.g7[id="blog__StyledDevider-sc-1dnbuxy-2"]{content:"kwpZJy,"}/*!sc*/
</style></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="anchor"><h2 class="blog__StyledTitle-sc-1dnbuxy-0 iqYGQi">Migration strategy: How to READ from or WRITE into a new data source</h2><div class="blog__StyledDate-sc-1dnbuxy-1 jHXVia">13 October, 2025</div><div><div><p>Reading from or writing into a new data source can be tricky and challenging.</p>
<p>For example, before we read data from DB A via method A, after the migration, we want to read data from DB B via method B and they should return the same data. Or, another example, before we write data into DB A, and with the migration, we will write data into DB B, in the end, DB B needs to contain full data from DB A.</p>
<p>There are common strategies to handle these technical challenges.</p>
<h2>READ from two data source</h2>
<p>Imagine the scenario that api reads data from DB A with method A, and in the future, the api reads data from DB B with method B.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/site-v2.0/static/cce470f25b0688c42d1c2c3efe76614c/0266f/1.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:59.523809523809526%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABlklEQVR42m1T2XLCMAz0//8fhFwcbZICsXM6J51RtUqcMsDDjuyVrMNeq8621HVW0PcdWd6PQ08Drx3vfLDg4Xe8XX3Or4wxdDgcKApD8jyP0jSlaRyoLIqFj2IKgoB2ux35fkBVWYo/imPymQ+C5dx+v6ckSUi1TUNa52S0FtR1RY95kk4KLlaWhVgX01nLHQ5UFIaM0ezTpPNc/DirUO0xj9Sv46BAHEV0OZ94XQtv2SJmnkbpDsAawPjzmgO8cgG4y7oqBbfrD2VpQg1XRAeGq7u4V7g7dXvlqiFRxeNhj3GQ1D0O7O9j3rp6BuI/JrRtIx1hTHSLUWHvtyt5fOHn05G5VrhnoJG3hG5kJPyE76+LJEaxV5/O7+8J8apuZNHf2iGA4CxLWUaG16y3tTP3iLBuSknY1PUmmVzfRX8IxBVADtDpIhFIRzPfin87s0oG0oJGFRa+74uAIeQsy2jianCCj1nAIYsewoXAKx4TnRyPRwqYD1liOAdxZ/wplLv8Zyyv24uIF86uaP6/3sbZLQ65/gCWjpH7En7IfwAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="1" title="" src="/site-v2.0/static/cce470f25b0688c42d1c2c3efe76614c/ff9d2/1.png" srcSet="/site-v2.0/static/cce470f25b0688c42d1c2c3efe76614c/0372f/1.png 168w, /site-v2.0/static/cce470f25b0688c42d1c2c3efe76614c/2ec80/1.png 336w, /site-v2.0/static/cce470f25b0688c42d1c2c3efe76614c/ff9d2/1.png 672w, /site-v2.0/static/cce470f25b0688c42d1c2c3efe76614c/7b5cb/1.png 1008w, /site-v2.0/static/cce470f25b0688c42d1c2c3efe76614c/0266f/1.png 1186w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>The challenge is: how to make sure data reading from DB A and DB B has no discrepancy at all ?</p>
<p>In order to do so, before serving the data to the front-end, the api could make an internal data comparison and log the data discrepancy, but in the meanwhile, always serve the data of the old data source (method A with DB A).</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/site-v2.0/static/e405c90b8a318e2886086ce0dda7e0d0/74749/2.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:79.16666666666667%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABx0lEQVR42p1U21bjMAzs//8gcA502zT3i3Nz4yT7IGaUupiSPQs86MSWpdFIkXRYl1nGcZA0TVTGYZDr1UpdV1KWhb7xHsexJEks5/NJutbArpcoiqC/QHeWvmuFWIdldnAYxZhGmqbW8zRdpYNB17ZiATgMnb6ZxkhVlfcg1DV1rTprR1mBpYDrTZZQ3CQTnAycTqc/yohCFt6G5xnfv+ty1x38YQYAxd8JxjSuiNwgfTJtkQXvYWAHHxf47QIyIqMThAAUsjuDaYY6U887A1LCALuANCabGrVhykPfiUNdeSYA2ftAj4x3AQnQGiNpkuifJsDyWGOfMgJ9AWR6jEQGBM2zVI7HN03x0Tms8z8Bt4dJxY69plqVpdbKs99z/i9D1q0sconQvARlqmEpvg14Twdf1u7l+UmOb68aRHvtN4B04mNYzwo/JHT4IcPpDqzzjdZJMbs2aAs60252noS73af9lNkurGGCgef5Y8wmNPt8a/qH0XOfdQporcWAV5LnGRZBr6w4+DUG346j/hxuH9oURbFtJNiU6IRNtq2k22ZdnLZHkecqHsA0zcdmgXOWppKhPy9YWX4LJTFXHnSXCBO0ZfQOJO3Peb03seQAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="2" title="" src="/site-v2.0/static/e405c90b8a318e2886086ce0dda7e0d0/ff9d2/2.png" srcSet="/site-v2.0/static/e405c90b8a318e2886086ce0dda7e0d0/0372f/2.png 168w, /site-v2.0/static/e405c90b8a318e2886086ce0dda7e0d0/2ec80/2.png 336w, /site-v2.0/static/e405c90b8a318e2886086ce0dda7e0d0/ff9d2/2.png 672w, /site-v2.0/static/e405c90b8a318e2886086ce0dda7e0d0/7b5cb/2.png 1008w, /site-v2.0/static/e405c90b8a318e2886086ce0dda7e0d0/275af/2.png 1344w, /site-v2.0/static/e405c90b8a318e2886086ce0dda7e0d0/74749/2.png 1412w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>When there are no more data discrepancies, we can decommission the reading from DB A with method A.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/site-v2.0/static/7cbb3077295aab468b74e35e859bc55a/1f88f/3.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:52.976190476190474%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABmUlEQVR42mVT13LDMAzz//9dlp3ZjNq9OF6SLY+MHkowlS9pH3giJQIiKSho6hpt69A6B/Vdg+vQwzUNamvhJPZ+J3k8Y07nWj0jrmtbXckTnM9nLJcrrFYrJEkCK0CCTFWhLEscDgfEcYxCfGuNnp2ORywWC6zXa8VNpzOEYYQ8yxBUAsyyixoJmqZWUC3VGmOQ5zmYY+Sivu/w/bhrtcwvilzOM6RpqjE7DAimDZJ8uw7wsbe+k9bkEq5J/IllFEqFB83nPtsnzmMDT0aA919Xzq2WVmm5VPGVxLikZ6nGalwWBe6361jASMjB0ufh437TlbeyCoLpk3z/sUNVFvhbyD/Coe/HxyCgkNlwny3RJxnJvXH/qQr3Tuhv5nxI9LHbYrfdYLvZaEvc8zN6tXH2Y4XPEQWsiFKpqlKrIzlb5s2M1eS1uVJ3g4CsxMRoN4KrZSTc01emDqMoetMhW2ViWVbY7/eqQ0qKD8PqTqcTZvP5qMPJZCI6DFVCgRV2Yyo1CteNP6V+3myNGv3296dQqz6f5vGc6w/g2UZ3s2yvSQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="3" title="" src="/site-v2.0/static/7cbb3077295aab468b74e35e859bc55a/ff9d2/3.png" srcSet="/site-v2.0/static/7cbb3077295aab468b74e35e859bc55a/0372f/3.png 168w, /site-v2.0/static/7cbb3077295aab468b74e35e859bc55a/2ec80/3.png 336w, /site-v2.0/static/7cbb3077295aab468b74e35e859bc55a/ff9d2/3.png 672w, /site-v2.0/static/7cbb3077295aab468b74e35e859bc55a/7b5cb/3.png 1008w, /site-v2.0/static/7cbb3077295aab468b74e35e859bc55a/1f88f/3.png 1184w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<h2>WRITE into two data source</h2>
<p>Migration with data writing is more tricky, because it concerns data migration.</p>
<p>Imagine the following case: the api calls service A and service B in the same time and save data into two DB separately, but the challenge is the new DB (DB B) doesn&#x27;t contain legacy data from DB A, so DB B cannot be used for data reading yet.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/site-v2.0/static/ab94801d4d2c584aeb121d2326231399/5c19b/4.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:45.833333333333336%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaUlEQVR42kVS2W6DMBDk/78vpOWooFK5iY1tIEAqbXcmoXlY7doznr0cOTeJtVaGYZDbODIOwcuxbzKHIH3XPa3vpWkamRTft7tiXjq9715427Z8GxljxBgrZVnKT1UJzs45eRwbhfM8lzTL6OM4llGTIpn3TjK9T5JE0jSV6/VK4WiZAyvBY8RBiTjv28oqEC/LrNhMP8+BFa7L8r5TzvriRMgGu68LBb7LQrI0oS++cmnqSryOBfjv4yAXgqdt95UYYmDRCSDDZA3Nou3J6kwHFaxVvNR2Wgoj6ePY5Szk0PgUhP0Lol2I4BEMraO65PND8ixl1Yjr6oc8a27qDTlY7Fl5hNlhwBCYlGiUyBZfsznnFvxznt55dgO+1+Vh626aiEOLW8a6i6KQqqrFaOz9sy2QsElsEf5yuXDLxMIbw6bj+LVlZtEMIEIcMSpBCxgD/if/6G1UzsBq+A8Vw98chp5v8YeB/QH6Iqmtb5J1mgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="4" title="" src="/site-v2.0/static/ab94801d4d2c584aeb121d2326231399/ff9d2/4.png" srcSet="/site-v2.0/static/ab94801d4d2c584aeb121d2326231399/0372f/4.png 168w, /site-v2.0/static/ab94801d4d2c584aeb121d2326231399/2ec80/4.png 336w, /site-v2.0/static/ab94801d4d2c584aeb121d2326231399/ff9d2/4.png 672w, /site-v2.0/static/ab94801d4d2c584aeb121d2326231399/7b5cb/4.png 1008w, /site-v2.0/static/ab94801d4d2c584aeb121d2326231399/5c19b/4.png 1150w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>In this case, there are two options:</p>
<h4>Method migration first, data migration next</h4>
<p>Most naturally, we let the api to call service B and service in the same time and store the new data in both DBs.</p>
<p>In order to let DB B contain full data, we just need to do the data migration from DB A to DB B (while make sure no duplication of data), and after that, we can start to READ from DB B with the strategy we introduced above.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/site-v2.0/static/25404935b4497086363d4a3d7f953b08/2e7af/5.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:61.904761904761905%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABhElEQVR42m1T2XLDMAj0//9hc4zj2JHv+3aa2bKkcpWkDzuyBVpgAa/rWpRliSzLUNcVxqHHPI1I4hhxbBBFESqxb+uCdZl3bMuCQXyNMQr6dW0Dr+s6JUySBE3TYJknfZwksTjeEARXFEWB9Z1wnZWQREQQBGjlvWcdmFUsBJeLjzC8SoZGs3183/G4b7hvq4LBXNg7nuTZCdumltKKHXUlMqQJUsmU5DzzLNXALqZxQC+yrVLZCyENzMgFHUkWXgNEkjUrKItckeeZBMj0uxHtLc9O2NS1RnR1ejbH4Hj4wul4UJzPJ5hbpEEIfpP0g5ARmaVLyAaxc3xAGSgBpXF14zkOwyshH7qaWPyNkFH9+Ji+rg/BoG+Es84ao7tgY+hM/Vgav107/6nfS8mMSNAw9N2/GfL+3WZhq7KD77Vtq4Obij5VJZsiRga4SUftwJZi/9gU+R96DnYocxvC931ZjBpeL5ErKY1N4cX0S5imqW5PLCvIlfxcvVkr4EY9/YyO2Q99EJTNhbTjOQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="5" title="" src="/site-v2.0/static/25404935b4497086363d4a3d7f953b08/ff9d2/5.png" srcSet="/site-v2.0/static/25404935b4497086363d4a3d7f953b08/0372f/5.png 168w, /site-v2.0/static/25404935b4497086363d4a3d7f953b08/2ec80/5.png 336w, /site-v2.0/static/25404935b4497086363d4a3d7f953b08/ff9d2/5.png 672w, /site-v2.0/static/25404935b4497086363d4a3d7f953b08/7b5cb/5.png 1008w, /site-v2.0/static/25404935b4497086363d4a3d7f953b08/2e7af/5.png 1222w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>But sometimes, if the method migration is too complex, for example, there are 10 flows to migrate. In this case, we can consider migrating the data first and make sure data integrity between two DB, and migrate the flows gradually later.</p>
<h4>Data migration first, method migration next</h4>
<p>In the following example, we introduce the event based system to sync data between new database and old database when there is data inserted into old database.</p>
<p>After DB B is sync with the new data inserted into DB A. We can start to do the data migration, and after the data migration, we can implement the writing to DB B directly.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/site-v2.0/static/37b3e215358bb684f6d06d042b6c70e7/ff342/6.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:47.61904761904761%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaElEQVR42k1Sy7aEIAzj/7/yjooIIoogPmbR21SZ46IHKCFNadQcAi3zTHvZ6HsdFONC3o80Okdly5RTImAQ9Tx5T3YYKK1Rcjg7Z5knkMLDcfQUl0UuAdRdR8YYOW8cTjAjFS6a1pXvNbVNQ2uMtOVMWmvq+E2YJlLHXsiPjkEtmV4zoZFK3+ukkpMov86DzmOX9ctxPYHcnT9/9woPQPoGZCZauXWQo1hc5lst57enCN5UPPZQj716X9TYOVeLQCn2IO3ahlv9cGv+p7xG5VGomNMqiRrboxAkeDzxkKC0+fxRrzv5EgQwiDlMwiEtY1KId8v7Ix/gjv8WJAgQ13brWvf4ElFYShbCWq3uURGVB9OzhawMDIqRf+OwIg83iELYwXNbaBMVJh49LNMz0T2EzL7ktplcvoIJDA+rbVtapEBi/CDWCcGTAkE1NirAwPBiNTYIYVzkgYFCawdWPogngXHWSg48/1p+/FrHZsciAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="6" title="" src="/site-v2.0/static/37b3e215358bb684f6d06d042b6c70e7/ff9d2/6.png" srcSet="/site-v2.0/static/37b3e215358bb684f6d06d042b6c70e7/0372f/6.png 168w, /site-v2.0/static/37b3e215358bb684f6d06d042b6c70e7/2ec80/6.png 336w, /site-v2.0/static/37b3e215358bb684f6d06d042b6c70e7/ff9d2/6.png 672w, /site-v2.0/static/37b3e215358bb684f6d06d042b6c70e7/7b5cb/6.png 1008w, /site-v2.0/static/37b3e215358bb684f6d06d042b6c70e7/ff342/6.png 1244w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<p>If we want to make sure data integrity for newly inserted data between method A and method B, we can introduce internal jobs to compare data.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/site-v2.0/static/d0ddd3c532ca12ae8c4959899cb2be50/dd9c3/7.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:50.595238095238095%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTUlEQVR42nWS6Y6DMAyEef+3bAsJlDOUcHUlrz+3riqt9ochiT0zvoo0jXK/N5JSkp/nKXOapCxv0tS1bGuWvu+kUX/Oi0zjKJfrRZqmllXvIVQW+5iTnMcux75JseYs8zQpQZRWgRD1XSd5eVhAXhYFzEbOmQSWxyz7thoRCeAj1gjPYzM1HBhBGKCuvX/Az/Mwc+B/VvABQMpuKELkxAiFqpQYgr05GBz2h3DR8iDZ34+v8l5vZD8OvZS3q5EO2lNEXMhb4+RWsjsgcLLVhjBoP1sjo78QczdxBRPzXd0nQxyQuKHOH0JI+HMHzFB8gFGnXMdgIhiJFc78/XfzQXy/eZy3BgGvDCvo36j7xWocrIJNt9W3QVYAqjq8z/hanfz0JhlogfaUCr2PBYBO0026i6hzj1FLal+9gpgzi01MVVUmCAkLHmOwZLyHv4+X/9Ik1tF6AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="7" title="" src="/site-v2.0/static/d0ddd3c532ca12ae8c4959899cb2be50/ff9d2/7.png" srcSet="/site-v2.0/static/d0ddd3c532ca12ae8c4959899cb2be50/0372f/7.png 168w, /site-v2.0/static/d0ddd3c532ca12ae8c4959899cb2be50/2ec80/7.png 336w, /site-v2.0/static/d0ddd3c532ca12ae8c4959899cb2be50/ff9d2/7.png 672w, /site-v2.0/static/d0ddd3c532ca12ae8c4959899cb2be50/7b5cb/7.png 1008w, /site-v2.0/static/d0ddd3c532ca12ae8c4959899cb2be50/dd9c3/7.png 1256w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<h2>Summary</h2>
<p>No matter whether you are reading from two sources, or writing from two sources, the most important thing is to make sure there is no data difference with two ways of reading or writing. In this article, we introduced common strategies to make sure the data integrity.</p>
<p>Thanks for reading !</p></div></div><div><a href="/site-v2.0/blog/">Back to Blogs</a><span class="blog__StyledDevider-sc-1dnbuxy-2 kwpZJy">|</span><a href="/">Go to Top</a></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/data-migration/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-8b843682a0a4ed3268fb.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-3e77c44618267e9d1005.js\"],\"component---src-components-blog-tsx\":[\"/component---src-components-blog-tsx-1d5b1ad62b2478af715b.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-527199df2f1ba2c6c5af.js\"],\"component---src-pages-about-tsx\":[\"/component---src-pages-about-tsx-a97d2cbadf143c2f8306.js\"],\"component---src-pages-code-tsx\":[\"/component---src-pages-code-tsx-c80bc752918c10741088.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-c1837cf5c64b6c07292c.js\"],\"component---src-pages-music-tsx\":[\"/component---src-pages-music-tsx-c557ef2d5dc2b54268fe.js\"],\"component---src-pages-ux-tsx\":[\"/component---src-pages-ux-tsx-f3487f8c576d9ac0f1c3.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="eb9b50ccac76a7bb2581";</script><script src="/site-v2.0/webpack-runtime-1c8e9602bf10db530e7b.js" async></script><script src="/site-v2.0/framework-2c6e23597628f64eccfb.js" async></script><script src="/site-v2.0/app-8b843682a0a4ed3268fb.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>